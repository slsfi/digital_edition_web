<ion-content>
    <ion-scroll scrollX="false" scrollY="false" zoom="true" class="scroll">
        <div middle class="facsimile_button_group">
            <div class="buttons">
                <div class="action_buttons">
                    <button style="display: inline-block;" ion-fab color="primary" mini (click)="previous()">
                        <ion-icon name="arrow-back"></ion-icon>
                    </button>
                    <button *ngIf="backsides.length" style="display: inline-block;" ion-fab color="primary" mini
                        (click)="backside = !backside">
                        <ion-icon name="refresh-circle"></ion-icon>
                    </button>
                    <button style="display: inline-block;" ion-fab color="primary" mini (click)="next()">
                        <ion-icon name="arrow-forward"></ion-icon>
                    </button>
                    <button ion-fab mini (click)="rotate()">
                      <ion-icon name="refresh"></ion-icon>
                    </button>
                    <button *ngIf="!userSettingsService.isMobile() && !userSettingsService.isTablet()"
                        style="display: inline-block;" ion-fab color="primary" mini (click)="zoomIn()">
                        <ion-icon name="add"></ion-icon>
                    </button>
                    <button *ngIf="!userSettingsService.isMobile() && !userSettingsService.isTablet()"
                        style="display: inline-block;" ion-fab color="primary" mini (click)="zoomOut()">
                        <ion-icon name="remove"></ion-icon>
                    </button>
                    <button *ngIf="descriptions && descriptions[activeImage]" style="display: inline-block;" ion-fab
                        color="primary" mini (click)="showAbout()">
                        <ion-icon name="code-working" *ngIf="showAboutHelp"></ion-icon>
                        <ion-icon name="code" *ngIf="!showAboutHelp"></ion-icon>
                    </button>
                    <button style="display: inline-block;" ion-fab mini (click)="cancel()">
                        <ion-icon name="close" class="close_button"></ion-icon>
                    </button>
                    <div class="page_nubering"
                        *ngIf="!userSettingsService.isMobile() && !userSettingsService.isTablet()">
                        <ion-item>
                            <ion-label position="floating">{{"Read.Facsimiles.Page" | translate}}
                                ({{"Read.Facsimiles.Of" | translate}} {{(images)?images.length:0}}):</ion-label>
                            <ion-input class="page_number_input" size="12" (change)="setPage($event)"
                                [(ngModel)]="manualPageNumber" type="number"></ion-input>
                        </ion-item>
                    </div>
                </div>
                <div *ngIf="descriptions && descriptions[activeImage]" class="description"
                    [ngStyle]="{'display': showAboutHelp?'':'none'}">
                    <ion-label *ngIf="descriptions && descriptions[activeImage]" class="facs-desc">
                        {{descriptions[activeImage]}}
                    </ion-label>
                </div>
            </div>
        </div>
        <div class="contents">
            <div class="center_content">
                <div class="div_img">
                    <div *ngIf="!userSettingsService.isMobile() && !userSettingsService.isTablet()">
                        <img *ngIf="!facsimilePagesInfinite && (!backside || !backsides[activeImage])"
                          [src]="images[activeImage]"
                          class="facsimile-zoom-image"
                          [ngStyle]="{'transform':'scale('+zoom+') rotate('+angle+'deg) translate3d(' + prevX + 'px, ' + prevY + 'px, 0px)'}"
                          (wheel)="onMouseWheel($event)"
                          (pan)="handlePanEvent($event)"
                          (mouseup)="onMouseUp($event)"
                        >
                        <img *ngIf="!facsimilePagesInfinite && backside && backsides[activeImage]"
                          [src]="backSide(images[activeImage])"
                          class="facsimile-zoom-image"
                          [ngStyle]="{'transform':'scale('+zoom+') rotate('+angle+'deg) translate3d(' + prevX + 'px, ' + prevY + 'px, 0px)'}"
                          (wheel)="onMouseWheel($event)"
                          (pan)="handlePanEvent($event)"
                          (mouseup)="onMouseUp($event)"
                        >
                        <img *ngIf="facsimilePagesInfinite && facsNumber"
                          [src]="facsUrl + facsNumber"
                          class="facsimile-zoom-image"
                          [ngStyle]="{'transform':'scale('+zoom+') rotate('+angle+'deg) translate3d(' + prevX + 'px, ' + prevY + 'px, 0px)'}"
                          (wheel)="onMouseWheel($event)"
                          (pan)="handlePanEvent($event)"
                          (mouseup)="onMouseUp($event)"
                        >
                    </div>
                    <div *ngIf="(userSettingsService.isMobile() || userSettingsService.isTablet())">
                        <div *ngIf="!facsimilePagesInfinite">
                            <pinch-zoom (swipe)="handleSwipeEvent($event)">
                                <img [src]="images[activeImage]" class="facsimile-zoom-image">
                            </pinch-zoom>
                        </div>
                        <div *ngIf="facsimilePagesInfinite && facsNumber">
                            <pinch-zoom (swipe)="handleSwipeEvent($event)">
                                <img [src]="facsUrl + facsNumber" class="facsimile-zoom-image">
                            </pinch-zoom>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ion-scroll>
</ion-content>
